# 需求文档 - 业务采集功能模块

## 1\. 功能概述

  - 1.1 功能名称：业务采集
  - 1.2 功能概述：业务采集是一个可视化的接口对接功能模块，旨在解决平台间接口对接需要硬编码、维护成本高的问题。平台支持多种连接类型（HTTP接口、数据库、消息队列），提供智能化的同步任务创建向导、增强的字段映射可视化功能以及全面的日志查询分析能力，以实现平台间数据同步的快速配置、高效管理和透明化监控。

## 2\. 用户与场景

  - 2.1 目标用户: 平台管理员、系统集成工程师、负责业务对接的技术产品经理。这些用户需要频繁配置、管理和监控不同业务系统间的接口数据流，但希望减少对底层代码开发的依赖。
  - 2.2 用户场景/故事:
      - [cite\_start]场景一：线下对接流程繁琐。参考“中移集成对接方案”[cite: 1][cite\_start]，贵州移动需要与浙江创新院进行业务订购接口对接 [cite: 2][cite\_start]。传统方式下，需要投入人力进行方案设计、接口开发、参数映射和联调测试 [cite: 8]，流程长，维护成本高。
      - [cite\_start]场景二：使用业务采集模块快速配置对接。作为一个系统集成工程师，我想要在一个可视化的界面上，首先创建“贵州移动”和“浙江创新院”两个平台，然后分别为它们定义“订购接口”(/orderRequest) [cite: 6] [cite\_start]和“退订接口”(/orderCancel) [cite: 17][cite\_start]，并使用可视化编辑器录入接口所需的字段 [cite: 9, 19]。最后通过任务管理功能，将两个平台的接口进行关联和字段映射，从而将数周的开发周期缩短到几小时的配置时间。
      - 场景三：线上问题快速排障。作为一个平台管理员，我想要在接口调用出现问题时，能立刻通过系统查询到每一次具体调用的原始请求、转换后的数据以及目标平台的返回响应，以便于快速定位是源头数据问题、映射逻辑错误还是目标系统异常，而不是依赖开发人员排查服务器日志。

## 3\. 功能范围/列表

  - 3.1 功能模块一: 平台管理
  - 3.2 功能模块二: 接口管理
  - 3.3 功能模块三: 任务管理
  - 3.4 功能模块四: 同步日志

## 4\. 功能模块详情

-----

### 4.1 功能模块：平台管理

#### 4.1.1 功能描述与目标

  - 解决的问题: 外部系统的连接信息（如URL、认证信息）分散管理，不统一，不直观，难以复用。
  - 用户价值/目标: 实现对所有需要对接的外部平台的连接信息进行统一、结构化的管理，形成可复用的“平台资产”，为后续的接口定义和任务配置提供基础。
  - 核心能力概述: 支持创建、编辑、查看和删除平台档案；支持配置HTTP、数据库、消息队列等多种连接类型；提供连接测试功能。

#### 4.1.2 原型参考

  - 主要原型页面: P-01 (平台列表页), P-02 (平台创建/编辑页)

#### 4.1.3 详细需求

##### 4.1.3.1 功能入口与触发条件

  - 入口: 主导航 -\> 业务采集 -\> 平台管理
  - 触发条件: 用户已登录，并拥有“平台管理”相关权限。

##### 4.1.3.2 交互流程与界面详述

  - 主界面/列表描述: [参考原型 P-01] 平台列表页，以卡片或列表形式展示已创建的平台。列表项包含平台名称、连接类型、状态（如连接正常/异常）、操作按钮（编辑、删除）。页面上方提供“新增平台”按钮和搜索框。
  - 核心操作流程细化:
      - A. 新增平台 流程:
          - Step 1: 用户点击“新增平台”按钮。
          - Step 2: 系统跳转至“新增平台”页面 [参考原型 P-02]。
          - Step 3: 用户输入平台名称（如：贵州移动）、描述，并选择连接类型（如：HTTP）。
          - Step 4: 根据选择的连接类型，展示对应配置项。例如选择HTTP，则需填写Base URL、认证方式等。
          - Step 5: 用户填写完毕后，可点击“连接测试”按钮。
          - Step 6: 系统向目标平台发起连接测试。成功则提示“连接成功”，失败则提示具体原因。
          - Step 7: 用户点击“保存”按钮。系统校验平台名称唯一性后，保存平台信息，并跳转回平台列表页 P-01。
      - B. 编辑平台 流程:
          - Step 1: 用户在平台列表页 P-01 点击目标平台对应的“编辑”按钮。
          - Step 2: 系统跳转至“编辑平台”页面 [参考原型 P-02]，页面中已回填该平台的所有现有信息。
          - Step 3: 用户可修改平台名称、描述、连接配置等信息。
          - Step 4: 若用户修改了连接配置，可再次点击“连接测试”按钮进行验证。
          - Step 5: 用户点击“保存”按钮。系统进行校验（如名称唯一性），校验通过后更新平台信息，并跳转回平台列表页 P-01。
      - C. 删除平台 流程:
          - Step 1: 用户在平台列表页 P-01 点击目标平台对应的“删除”按钮。
          - Step 2: 系统弹出二次确认对话框：“确认删除该平台吗？平台下的所有接口定义也将被删除。”
          - Step 3: 用户点击“确认”。
          - Step 4: 后端校验该平台下的任一接口是否被“任务管理”中的任务所引用。
          - Step 5: 结果处理:
              - 成功: 若未被任何任务引用，则删除该平台及其下属所有接口定义，返回平台列表页并显示成功提示。
              - 失败: 若被任务引用，则操作失败，并提示“删除失败。该平台下的接口正在被N个任务使用，请先处理相关任务。”

##### 4.1.3.3 字段定义与数据规则

| 字段名称 | 字段标识 (Eng) | 数据类型 & 长度 | 界面显隐/读写 | 约束/规则 | 数据来源/去向 | 备注/说明 |
|--------------|------------------|-------------------|---------------|--------------------------------------------------------------------|-----------------|----------------------|
| 平台名称 | platformName | String(100) | 显示/读写 | 必填，全局唯一 | 用户输入 | 对接的业务系统名称，例如“贵州移动” |
| 平台描述 | description | String(255) | 显示/读写 | 可选 | 用户输入 | 用于描述平台用途或关键信息 |
| 连接类型 | connectionType | String(20) | 显示/读写 | 必填，枚举值：HTTP, Database, MQ | 用户选择 | 定义了与该平台交互的技术方式 |
| 连接配置 | connectionConfig | JSON | 隐藏/读写 | 必填，根据连接类型动态变化的配置项 | 用户输入 | 例如HTTP类型下，包含{ "baseUrl": "[http://api.example.com](https://www.google.com/search?q=http://api.example.com)", "authType": "none" } |

##### 4.1.3.4 权限控制

  - 功能访问权限: 拥有“业务采集管理员”角色的用户可以访问该模块。
  - 操作权限: “业务采集管理员”可以对平台进行增、删、改、查操作。可设定“观察员”角色，仅允许查看。

#### 4.1.4 业务规则

  - 平台名称全局唯一。
  - 删除平台前，必须校验该平台下的接口是否被任何“任务管理”中的任务所引用。若被引用，则禁止删除。

#### 4.1.5 异常处理方案

  - 名称重复: 保存时若平台名称重复，应在界面提示“名称‘XX’已存在”。
  - 连接测试失败: 点击“连接测试”按钮后，若失败，应在按钮旁或弹窗中明确提示失败原因，如“无法访问的地址”、“认证失败”等。
  - 删除失败: 删除被引用的平台时，提示“删除失败。该平台下的接口正在被N个任务使用，请先处理相关任务。”

#### 4.1.6 与其他功能的关联和依赖

  - 依赖于: 无。
  - 被依赖于: “接口管理”模块依赖本模块提供平台选择。

-----

### 4.2 功能模块：接口管理

#### 4.2.1 功能描述与目标

  - 解决的问题: 接口的数据结构定义分散在不同文档或代码中，不统一、不直观、难以复用，每次对接都需要重新定义。
  - 用户价值/目标: 为每个平台提供一个接口定义中心，将接口的请求路径、方法、字段结构等进行标准化定义，形成可被任务管理模块引用的“接口资产”。
  - 核心能力概述: 支持在指定平台下创建、编辑、查看和删除接口定义；支持使用可视化编辑器定义接口的字段层级和数据类型。

#### 4.2.2 原型参考

  - 主要原型页面: P-03 (接口列表页), P-04 (接口创建/编辑页)

#### 4.2.3 详细需求

##### 4.2.3.1 功能入口与触发条件

  - 入口: 主导航 -\> 业务采集 -\> 接口管理
  - 触发条件: 用户已登录，并拥有“接口管理”相关权限。

##### 4.2.3.2 交互流程与界面详述

  - 主界面/列表描述: [参考原型 P-03] 接口列表页，以列表形式展示已创建的接口。页面上方提供“新增接口”按钮和筛选器（如按所属平台筛选）。列表项包含接口名称、所属平台、请求路径、操作按钮（编辑、删除）。
  - 核心操作流程细化:
      - A. 新增接口 流程:
          - Step 1: 用户点击“新增接口”按钮。
          - Step 2: 系统跳转至“新增接口”页面 [参考原型 P-04]。
          - Step 3: 用户首先通过下拉框选择该接口所属的平台。
          - [cite\_start]Step 4: 用户输入接口名称（如：订购接口）、接口路径（如：/orderRequest [cite: 6]）、请求方法（如：POST）等。
          - [cite\_start]Step 5: 用户在“字段层级编辑器”中，通过点击“添加字段”等操作，可视化地定义接口的请求或响应报文字段结构。例如，可完全复现“中移集成对接方案-订购”接口中的字段，包括顶层的`mainOrderNo`，以及支持定义嵌套的`customerInfo`对象及其下的`customName`等字段 [cite: 9]。
          - Step 6: 用户点击“保存”按钮，系统校验通过后保存接口定义，并跳转回接口列表页 P-03。
      - B. 编辑接口 流程:
          - Step 1: 用户在接口列表页 P-03 点击目标接口对应的“编辑”按钮。
          - Step 2: 系统跳转至“编辑接口”页面 [参考原型 P-04]，页面中已回填该接口的所有现有信息。
          - Step 3: 用户可修改接口名称、路径、方法以及在字段层级编辑器中调整字段定义。所属平台通常不允许修改。
          - Step 4: 用户点击“保存”按钮。系统进行校验，通过后更新接口定义，并跳转回接口列表页 P-03。
      - C. 删除接口 流程:
          - Step 1: 用户在接口列表页 P-03 点击目标接口对应的“删除”按钮。
          - Step 2: 系统弹出二次确认对话框：“确认删除该接口吗？”
          - Step 3: 用户点击“确认”。
          - Step 4: 后端校验该接口是否被“任务管理”中的任务所引用。
          - Step 5: 结果处理:
              - 成功: 若未被任何任务引用，则删除该接口定义，返回接口列表页并显示成功提示。
              - 失败: 若被任务引用，则操作失败，并提示“删除失败。该接口正在被N个任务使用，请先处理相关任务。”

##### 4.2.3.3 字段定义与数据规则

下表以“中移集成对接方案”中的订购接口为例，展示字段定义方式。系统支持用户通过界面录入类似的任意字段结构。
| 字段名称 | 字段标识 (Eng) | 数据类型 & 长度 | 界面显隐/读写 | 约束/规则 | 数据来源/去向 | 备注/说明 |
|--------------|------------------|-------------------|---------------|--------------------------------------------------------------------|-----------------|----------------------|
| 主工单号 | mainOrderNo | String(20) | 显示/读写 | [cite\_start]必填：是 [cite: 9] | 用户（通过编辑器）定义 | |
| 订单编号 | orderNo | String(20) | 显示/读写 | [cite\_start]必填：是 [cite: 9][cite\_start]。规则：一个子订单中最多包含1个摄像头 [cite: 9]。 | 用户定义 | |
| 部门 | department | Int | 显示/读写 | [cite\_start]必填：是 [cite: 9][cite\_start]。枚举值：政企, 市场, 其他 [cite: 9]。 | 用户定义 | |
| 客户信息 | customerInfo | Object | 显示/读写 | [cite\_start]必填：是 [cite: 9]。 | 用户定义 | 此为嵌套对象类型，其下可继续定义子字段 |
| \> 客户名称 | \> customName | String(255) | 显示/读写 | [cite\_start]必填：是 [cite: 9]。 | 用户定义 | 客户信息(customerInfo)对象的子字段 |
| \> 客户级别 | \> customLevel | String(64) | 显示/读写 | [cite\_start]必填：否 [cite: 9][cite\_start]。枚举：A, B, C, D, E [cite: 9]。 | 用户定义 | |
| 安装地址 | accessAddress | String(100) | 显示/读写 | [cite\_start]条件必填：否 [cite: 9][cite\_start]。规则：业务类型为“开通”时必填 [cite: 9]。 | 用户定义 | |

##### 4.2.3.4 权限控制

  - 功能访问权限: 拥有“业务采集管理员”角色的用户可以访问该模块。
  - 操作权限: “业务采集管理员”可以对接口进行增、删、改、查操作。

#### 4.2.4 业务规则

  - 接口名称在同一个平台下必须唯一。
  - 删除接口前，必须校验其是否被任何“任务管理”中的任务所引用。
  - 编辑接口定义后，引用该接口的存量任务可能需要用户手动检查并更新其字段映射。

#### 4.2.5 异常处理方案

  - 名称重复: 保存时若同一平台下接口名称重复，应在界面提示“名称‘XX’在该平台下已存在”。
  - 删除失败: 删除被引用的接口时，提示“删除失败。该接口正在被N个任务使用，请先处理相关任务。”

#### 4.2.6 与其他功能的关联和依赖

  - 依赖于: “平台管理”模块，创建接口时必须选择一个已存在的平台。
  - 被依赖于: “任务管理”模块依赖本模块提供接口选择。

-----

### 4.3 功能模块：任务管理

#### 4.3.1 功能描述与目标

  - 解决的问题: 传统的接口对接近乎是“一次性”的硬编码开发，流程长、变更困难、复用性差。
  - 用户价值/目标: 提供一个无代码/低代码的配置环境，让非开发人员也能通过向导式流程，快速创建和管理数据同步任务。核心是实现源与目标接口之间灵活、可视化的字段映射与转换。
  - 核心能力概述: 提供向导式任务创建流程；支持从已定义的接口中选择源和目标；提供可视化的字段拖拽映射界面；支持查看映射预览和进行有效性验证；支持对任务进行激活、停用、编辑和删除等生命周期管理。

#### 4.3.2 原型参考

  - 主要原型页面: P-05 (同步任务列表页), P-06 (同步任务创建/编辑向导), P-06-1 (基本信息), P-06-2 (字段映射), P-06-3 (配置确认)

#### 4.3.3 详细需求

##### 4.3.3.1 功能入口与触发条件

  - 入口: 主导航 -\> 业务采集 -\> 任务管理
  - 触发条件: 用户已登录，并拥有“任务管理”相关权限。

##### 4.3.3.2 交互流程与界面详述

  - 主界面/列表描述: [参考原型 P-05] 任务列表页，展示所有已创建的任务。列表项包含任务名称、源平台/接口、目标平台/接口、状态（草稿、已激活、已停用）、最近运行时间、操作按钮（激活/停用、编辑、删除、查看日志）。页面上方提供“新建任务”按钮。
  - 核心操作流程细化:
      - A. 新建任务向导 流程:
          - Step 1: 用户点击“新建任务”按钮，进入任务创建向导 [参考原型 P-06]。
          - Step 2: 步骤一：基本信息 [参考原型 P-06-1]。用户输入任务名称、描述。通过下拉框选择源平台和源接口，再选择目标平台和目标接口。
          - Step 3: 步骤二：字段映射 [参考原型 P-06-2]。界面分为左右两栏，左侧展示源接口的字段树，右侧展示目标接口的字段树。用户可通过拖拽左侧的字段到右侧对应的字段上，建立映射关系。界面中央会用线条可视化地展示映射关系。支持配置简单的转换规则（如固定值、数据拼接等）。提供“预览”功能，可输入示例源报文，实时查看转换后的目标报文。
          - Step 4: 步骤三：配置确认 [参考原型 P-06-3]。以摘要形式展示任务的基本信息和字段映射关系概览。
          - Step 5: 用户点击“保存并激活”，任务进入“已激活”状态，开始监听并执行数据同步。或点击“存为草稿”，任务进入“草稿”状态，不执行。
      - B. 编辑任务 流程:
          - Step 1: 用户在任务列表页 P-05 点击目标任务对应的“编辑”按钮。
          - Step 2: 系统打开“编辑任务”向导式弹窗 [参考原型 P-06]，其结构与新建任务完全一致，包含“基本信息”、“字段映射”、“配置确认”三个步骤，并已回填该任务的所有现有信息。
          - Step 3: 用户在“基本信息”步骤中，可以修改任务名称、描述，但源平台/接口和目标平台/接口通常不允许修改，以保证映射关系的一致性。
          - Step 4: 用户点击“下一步”，进入“字段映射”步骤 [参考原型 P-06-2]。界面上已加载并展示所有已保存的字段映射关系。用户可以新增、删除或修改映射关系。
          - Step 5: 用户点击“下一步”，进入“配置确认”步骤 [参考原型 P-06-3]。系统会再次展示任务的核心配置信息供用户最终确认。
          - Step 6: 用户点击“完成”按钮。系统校验通过后更新任务信息，关闭弹窗，并刷新任务列表页 P-05。
      - C. 删除任务 流程:
          - Step 1: 用户在任务列表页 P-05 点击目标任务对应的“删除”按钮。
          - Step 2: 系统弹出二次确认对话框：“确认删除该任务吗？历史同步日志将被保留。”
          - Step 3: 用户点击“确认”。
          - Step 4: 系统将该任务彻底删除。如果任务是“已激活”状态，则先停止任务再进行删除。
      - D. 任务状态控制 流程:
          - Step 1: 在任务列表页 P-05，用户找到状态为“已激活”或“已停用”的任务。
          - Step 2: 点击对应的“停用”或“激活”按钮。
          - Step 3: 系统弹出二次确认对话框，用户确认后，后端更新任务状态，并立即生效。

##### 4.3.3.3 字段定义与数据规则

| 字段名称 | 字段标识 (Eng) | 数据类型 & 长度 | 界面显隐/读写 | 约束/规则 | 数据来源/去向 | 备注/说明 |
|--------------|------------------|-------------------|---------------|--------------------------------------------------------------------|-----------------|----------------------|
| 任务名称 | taskName | String(100) | 显示/读写 | 必填，全局唯一 | 用户输入 | |
| 源接口ID | sourceInterfaceId | Long | 隐藏/读写 | 必填，引用接口管理中的接口ID | 用户选择 | |
| 目标接口ID | targetInterfaceId | Long | 隐藏/读写 | 必填，引用接口管理中的接口ID | 用户选择 | |
| 字段映射规则 | mappingRules | JSON | 隐藏/读写 | 必填，存储字段映射和转换逻辑 | 系统生成（映射界面） | |
| 任务状态 | status | String(20) | 显示/读写 | 枚举值：草稿、已激活、已停用 | 系统控制/用户操作 | |

##### 4.3.3.4 权限控制

  - 功能访问权限: 拥有“业务采集管理员”角色的用户可以访问该模块。
  - 操作权限: “业务采集管理员”可以对任务进行增、删、改、查和启停操作。

#### 4.3.4 业务规则

  - 一个任务必须关联一个源接口和一个目标接口。
  - 字段映射时，系统应提供基础的数据类型校验，如类型不匹配应在界面上给出提示。
  - 任务在“草稿”状态下不执行任何数据同步操作。只有“已激活”状态的任务才会实际运行。
  - 向导的每一步都应自动保存草稿，防止用户意外退出导致数据丢失。

#### 4.3.5 异常处理方案

  - 激活失败: 尝试激活任务时，若其关联的源或目标平台连接测试失败，应禁止激活并提示“无法激活任务，因为平台‘XX’连接异常”。
  - 映射错误: 在字段映射步骤，若用户配置了无效的转换规则，点击“下一步”或“保存”时应提示具体错误。
  - 运行时异常: 任务在运行时若发生数据转换失败或目标接口调用失败，应记录到“同步日志”中，并标记为“失败”状态。

#### 4.3.6 与其他功能的关联和依赖

  - 依赖于: “接口管理”模块，需要其提供可选的源和目标接口。
  - 被依赖于: “同步日志”模块的数据来源。本模块的每一次任务执行都会在日志模块产生一条记录。

-----

### 4.4 功能模块：同步日志

#### 4.4.1 功能描述与目标

  - 解决的问题: 接口对接出现问题时信息不透明，排查链路长、难度大，需要跨团队协调和查看底层服务器日志。
  - 用户价值/目标: 为平台管理员和集成工程师提供一个强大、直观的线上问题排查工具，实现接口调用全链路的透明化，极大缩短故障定位和恢复时间。
  - 核心能力概述: 提供按任务、时间、状态等多维度筛选查询调用日志的功能；支持查看单次调用的完整报文快照，包括原始请求、转换后请求和目标响应；提供清晰的三栏报文对比展示。

#### 4.4.2 原型参考

  - 主要原型页面: P-07 (日志查询页), P-08 (日志详情弹窗/页)

#### 4.4.3 详细需求

##### 4.4.3.1 功能入口与触发条件

  - 入口: 主导航 -\> 业务采集 -\> 同步日志；或在“任务管理”列表页 P-05 点击指定任务的“查看日志”操作。
  - 触发条件: 用户已登录，并拥有查看日志的权限。

##### 4.4.3.2 交互流程与界面详述

  - 主界面/列表描述: [参考原型 P-07] 日志查询页，上方为筛选区域，下方为日志列表。
      - 筛选器:
          - 任务选择：下拉框，可选择要查询的特定任务，默认为“全部任务”。
          - 调用时间：日期时间范围选择器。
          - 调用状态：下拉框，可选择“成功”、“失败”、“全部”。
          - 关键词搜索：输入框，可模糊搜索报文内容或唯一ID。
      - 日志列表:
          - 显示列：调用时间、任务名称、源平台、目标平台、调用状态（成功/失败）、操作（查看详情）。
  - 核心操作流程细化:
      - A. 查看日志详情 流程:
          - Step 1: 用户在日志列表 P-07 中点击某条记录的“查看详情”按钮。
          - Step 2: 系统弹出“日志详情”页面/弹窗 [参考原型 P-08]。
          - Step 3: 详情页顶部为“基本信息”卡片，包含调用时间、任务名称、执行耗时、调用状态等关键摘要信息，并使用不同颜色的背景和图标以示区分。
          - Step 4: 下方为“报文内容”区域，采用经过美化的三栏卡片式布局，从左到右依次清晰展示：
              - 栏一：原始请求。卡片拥有独立的渐变色标题栏和图标，内容区展示从源平台接收到的最原始的报文。
              - 栏二：转换后请求。卡片同样拥有独立的视觉设计，内容区展示经过任务中配置的字段映射规则处理后，即将发送给目标平台的报文。
              - 栏三：目标响应。卡片设计与前两者保持风格一致，内容区显示从目标平台接收到的响应报文。
          - Step 5: 如果调用状态为“失败”，在报文内容下方会展示一个独立的“错误信息”卡片，使用醒目的红色主题设计，包含错误摘要和详细信息。
          - Step 6: 每个报文展示区都应提供格式化（如JSON格式化）和位于右上角的一键复制按钮。

##### 4.4.3.3 字段定义与数据规则

| 字段名称 | 字段标识 (Eng) | 数据类型 & 长度 | 界面显隐/读写 | 约束/规则 | 数据来源/去向 | 备注/说明 |
|--------------|------------------|-------------------|---------------|--------------------------------------------------------------------|-----------------|----------------------|
| 日志ID | logId | Long | 隐藏/只读 | 主键 | 系统生成 | |
| 任务ID | taskId | Long | 隐藏/只读 | 关联的任务ID | 系统记录 | |
| 调用时间 | callTimestamp | DateTime | 显示/只读 | 记录调用的发起时间 | 系统记录 | |
| 调用状态 | status | String(20) | 显示/只读 | 枚举值：Success, Failure | 系统记录 | |
| 原始请求报文 | originalRequest | TEXT | 详情显示/只读 | 完整的原始请求报文 | 系统记录 | |
| 转换后请求报文 | transformedRequest | TEXT | 详情显示/只读 | 完整的转换后报文 | 系统记录 | |
| 目标响应报文 | targetResponse | TEXT | 详情显示/只读 | 完整的目标平台响应 | 系统记录 | |
| 错误信息 | errorMessage | TEXT | 详情显示/只读 | 仅在失败时记录 | 系统记录 | |

##### 4.4.3.4 权限控制

  - 功能访问权限: 拥有“业务采集管理员”或“观察员”角色的用户可以访问该模块。
  - 数据权限: （未来可扩展）可根据用户角色或所属部门，限制其只能看到特定平台或任务相关的日志。

#### 4.4.4 业务规则

  - 每一次由“任务管理”模块中已激活任务触发的调用，都必须生成一条日志记录，无论成功与否。
  - 日志数据应设置生命周期，例如默认保留最近30天的数据，以控制存储成本。超期日志可归档或删除。
  - 为快速定位，应为每一次调用生成一个全局唯一的调用ID（Trace ID），并可在日志中搜索。

#### 4.4.5 异常处理方案

  - 报文过大: 在日志详情页展示非常大的报文时，应做性能优化，如默认折叠部分内容或分页加载，避免页面卡顿。
  - 查询超时: 如果日志查询因为数据量过大而超时，应提示用户“查询超时，请缩小时间范围或使用更精确的筛选条件”。

#### 4.4.6 与其他功能的关联和依赖

  - 依赖于: “任务管理”模块。本模块的所有数据都由任务的执行产生。
  - 被依赖于: 无。本模块是数据消费的终端，主要用于人的分析和排查。