# 需求文档 - 驾驶舱

## 1. 功能概述

- 1.1 功能名称：驾驶舱 
- 1.2 功能概述：驾驶舱作为运营门户的核心入口，旨在通过集中、直观的可视化方式，全面展示省级适配中心的关键运营数据、服务健康状态、省级平台连接情况，帮助运营及运维人员快速掌握适配中心整体运行态势，及时发现潜在问题，为决策提供数据支持。

## 2. 用户与场景

- 2.1 目标用户: 省级适配中心运营人员、运维管理员、管理决策层。
- 2.2 用户场景/故事:
    - 场景一：作为一个省级适配中心运营人员，我想要在登录后第一眼看到当前已接入的设备总数、活动视频流数量以及服务的客户总数等核心运营指标 ，以便快速了解整体业务规模和活跃度。
        
    - 场景二：作为一个省级适配中心运维管理员，我希望能实时监控到适配中心各微服务的健康状况 、与各省级视频平台的接口连接状态 3以及关键协议的适配成功率 ，以便在出现异常时能第一时间介入处理。
        
    - 场景三：作为一个省级适配中心管理决策者，我希望能通过趋势图表回顾近期的业务增长情况，如设备接入增长趋势、客户数量增长趋势以及视频业务量的变化趋势 ，以便评估运营成效和规划未来发展。
        

        

## 3. 功能范围/列表

- 3.1 省侧核心运营指标展示区
- 3.2 适配状态与服务健康度监控区
- 3.3 省级平台连接状态监控区


## 4. 功能模块详情

---

### 4.1 功能模块：运营驾驶舱

#### 4.1.1 功能描述与目标

- 解决的问题: 需要一个集中区域展示适配中心最核心的运营数据，使用户能够快速了解当前的业务规模、资源接入情况和主要业务的活跃程度。
- 用户价值/目标: 提供宏观的业务运营快照，帮助用户快速把握整体运营态势，及时发现业务波动。
- 核心能力概述: 以数据卡片和统计图表等形式，展示已接入设备总数、按省级平台分类的设备数量统计、服务的客户总数、活动视频流数量以及实时的关键业务量统计。 
    

#### 4.1.2 原型参考

- 主要原型页面: P_Dashboard_Main (驾驶舱主界面 - 核心运营指标区)

#### 4.1.3 详细需求

##### 4.1.3.1 关键指标卡片组

- **已接入设备总数**
    - 数据来源: （省侧）设备管理模块统计的已纳管设备总数。
    - 展示形式: 数字卡片，突出显示总数，可带有趋势箭头（较上一周期对比）。
    - 刷新机制: 近实时更新（如每5分钟）或根据设备注册/注销事件触发更新。
 
- **省级平台接入数量**
    - 数据来源: 接口适配模块 -> 接入平台管理中已配置且状态为“已启用”的省级平台实例总数。
    - 展示形式: 数字卡片。
    - 刷新机制: 配置变更时更新或定期（如每小时）刷新。
    
- **服务客户总数**
    - 数据来源: 客户管理模块统计的有效客户总数（若由适配中心管理或同步）。 
        
    - 展示形式: 数字卡片，可带有趋势箭头。
    - 刷新机制: 近实时更新（如客户信息增删改时）或定期（如每1小时）刷新。
    
- **活动视频流数量**
    - 数据来源: （省侧）流媒体处理与转发模块统计的当前活跃（正在被拉取或转发）的视频流会话总数。 
        
    - 展示形式: 数字卡片，动态更新。
    - 刷新机制: 实时或准实时更新（如每10-30秒）。
    

##### 4.1.3.2 设备分布统计

- **各省级平台设备接入数量统计**
    - 数据来源: （省侧）设备管理模块，按设备所属“接入平台”（如千里眼、移动看家、其他国标平台等）进行分类统计。 11
        
    - 展示形式: 饼图或横向/纵向堆叠柱状图，清晰展示各类平台接入的设备数量及其占比。鼠标悬浮可显示具体数量和百分比。
    - 刷新机制: 近实时更新（如每5分钟）或根据设备注册/注销事件触发更新。
    

##### 4.1.3.3 实时业务量监控

- **视频调阅次数 (今日/本小时)**
    - 数据来源: 业务日志或接口调用日志，统计实时视频点播、录像回放等视频调阅类业务的请求次数。 
        
    - 展示形式: 折线图（展示今日内每小时趋势）和数字卡片（展示当前小时或今日累计）。
    - 刷新机制: 近实时更新（如每分钟汇总一次数据）。
    - 交互: 鼠标悬浮折线图可查看具体时间点的数据。

- **数据传输量 (今日/本小时)**
    - 数据来源: 网络监控或流媒体模块，统计通过适配中心上行及下行的视频流媒体数据总量和信令数据总量。 
        
    - 展示形式: 折线图（展示今日内每小时趋势）和数字卡片（展示当前小时或今日累计，区分上行/下行）。
    - 刷新机制: 近实时更新（如每分钟汇总一次数据）。
    - 交互: 无。

---

### 4.2 适配状态与服务健康度监控区

#### 4.2.1 功能描述与目标

- 解决的问题: 需要实时了解适配中心自身各个微服务模块的运行状态以及关键的协议适配和数据同步任务的执行效果。
- 用户价值/目标: 确保运维人员能够快速感知适配中心内部服务的健康状况和核心适配能力的表现，及时发现和定位服务故障或适配效率问题。
- 核心能力概述: 通过仪表盘、状态指示和百分比图表等形式，展示各微服务模块的健康评分和运行状态、关键协议（如GB/T 28181）的适配成功率、核心数据同步任务的成功率，以及关键性能指标。 
    

#### 4.2.2 原型参考

- 主要原型页面: P_Dashboard_Main (驾驶舱主界面 - 适配与健康度区)

#### 4.2.3 详细需求

##### 4.2.3.1 服务状态仪表盘

- **各微服务模块健康评分/状态灯**
    - 数据来源: 适配中心健康与性能数据采集模块 16，通过心跳检测、资源使用率、错误率等综合评估各微服务（如南向接入服务、流媒体服务等）的健康状况。
        
    - 展示形式:
        - 列表形式：每行一个微服务，显示服务名称、当前健康评分（如0-100分）、运行状态（如正常运行、性能警告、服务不可用）并通过不同颜色的状态灯（绿、黄、红）直观表示。 
            
        - 或采用概览仪表盘，显示整体服务健康度评分，并突出显示异常的服务模块。
    - 刷新机制: 近实时更新（如每30秒至1分钟）。


##### 4.2.3.2 协议适配成功率展示

- **GB/T 28181 适配成功率 (今日)**
    - 数据来源: 南向协议适配模块的信令交互日志，统计GB/T 28181协议关键信令（如注册、心跳、目录获取、点播请求等）的成功次数与总次数，计算成功率。 
        
    - 展示形式: 百分比仪表盘或进度条。
    - 刷新机制: 近实时更新（如每5分钟汇总统计）。
    - 交互: 鼠标悬浮可查看成功次数和总尝试次数。
- **核心数据同步成功率 (今日)**
    - 数据来源: 业务数据收集与处理模块的同步任务日志（如CRM客户数据同步、省级平台元数据同步等）。 
        
    - 展示形式: 列表形式，每行一个核心同步任务，显示任务名称和今日同步成功率（百分比）。
    - 刷新机制: 定期更新（如每10分钟或根据同步任务执行周期）。
 

##### 4.2.3.3 核心性能指标

- **当前管理设备总体在线率**
    - 数据来源: （省侧）设备管理模块，统计当前状态为“在线”的设备数量与纳管设备总数的比率。 
        
    - 展示形式: 百分比仪表盘或数字卡片。
    - 刷新机制: 近实时更新（如每分钟）。


---

### 4.3 省级平台连接状态监控区

#### 4.3.1 功能描述与目标

- 解决的问题: 需要集中监控适配中心与所有已对接的省级视频平台之间的连接状态和交互质量，确保南向通道的畅通和稳定。
- 用户价值/目标: 帮助运维人员快速定位与特定省级平台连接失败或交互异常的问题，保障数据采集和业务调用的可靠性。
- 核心能力概述: 清晰、实时地展示与每一个已配置的省级视频平台的网络连接状态、认证状态、最新心跳时间 ，并监控关键的网络质量指标和接口调用统计。
    

#### 4.3.2 原型参考

- 主要原型页面: P_Dashboard_Main (驾驶舱主界面 - 省级平台连接区)

#### 4.3.3 详细需求

##### 4.3.3.1 平台连接状态矩阵

- **各省级平台连接、认证、心跳状态**
    - 数据来源: 接口适配模块 -> 接入平台管理模块，以及省级平台连接与交互状态数据采集模块。 24
        
    - 展示形式: 表格或矩阵形式。每行代表一个已配置的省级视频平台（如千里眼平台A、移动看家平台B）。列包括：平台名称、网络连接状态（如TCP连接通/断，可通过Ping或实际端口连接状态判断）、应用层认证状态（成功/失败/未认证）、最新心跳接收时间。 25 使用不同颜色的图标（绿、黄、红）直观表示状态。
        
    - 刷新机制: 近实时更新（如每30秒至1分钟）。


##### 4.3.3.2 网络质量监控 (针对主要省级平台)

- **网络延时 (Ping RTT)**
    - 数据来源: 省级平台连接与交互状态数据采集模块，对各主要省级平台的网络接口进行定期Ping测试。 
        
    - 展示形式: 小型折线图或列表，展示近期的平均延时和当前延时。对超过阈值的延时进行告警色标示。
    - 刷新机制: 定期更新（如每分钟）。
    - 交互: 无。
- **网络丢包率**
    - 数据来源: 省级平台连接与交互状态数据采集模块，通过Ping测试统计。 
        
    - 展示形式: 百分比或小型折线图。对超过阈值的丢包率进行告警色标示。
    - 刷新机制: 定期更新（如每分钟）。
    - 交互: 无。

